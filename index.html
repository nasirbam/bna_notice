<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>নোটিশ বোর্ড - বাংলাদেশ নার্সেস অ্যাসোসিয়েশন (বিএনএ), ময়মনসিংহ</title>
<link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600&display=swap" rel="stylesheet">
<style>
:root{--accent:#0b5ed7;--muted:#555}
*{box-sizing:border-box;font-family:'Hind Siliguri',sans-serif}
body{margin:0;background:#f8f9ff;color:#111}

/* Top bar */
.topbar{background:var(--accent);color:#fff;padding:10px 18px;display:flex;justify-content:space-between;align-items:center}
.topbar .admin-panel{display:flex;align-items:center;gap:10px}
.topbar .admin-panel button{background:#fff;color:var(--accent);border:none;font-size:20px;border-radius:50%;width:30px;height:30px;cursor:pointer;font-weight:bold}
.topbar .admin-panel .admin-info{display:none;align-items:center;gap:10px}
.topbar .admin-panel .admin-info span{font-size:14px}
.topbar .admin-panel .admin-info button{background:transparent;color:#fff;border:1px solid #fff;font-size:12px;padding:4px 8px;border-radius:4px;width:auto;height:auto}

/* Header */
.header{background:#fff;padding:16px 20px;border-bottom:1px solid #eee;display:flex;align-items:center;gap:14px}
.header img{width:70px;height:70px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.1)}
.header h1{margin:0;font-size:20px}
.header p{margin:3px 0 0;color:var(--muted);font-size:14px}

.container{max-width:1000px;margin:24px auto;padding:0 16px}
.notice{background:#fff;border-radius:10px;padding:14px 18px;margin-bottom:10px;box-shadow:0 2px 6px rgba(0,0,0,.05);display:flex;justify-content:space-between;align-items:flex-start}
.notice h3{margin:0;font-size:16px}
.notice p{margin:4px 0 0;font-size:13px;color:var(--muted)}
.notice .notice-date{font-size:12px;color:#888;margin-top:5px}
.notice .notice-actions{display:flex;gap:8px;align-items:center}

/* Modal */
.modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.5);z-index:999}
.modal.open{display:flex}
.modal .box{background:#fff;padding:20px;border-radius:10px;max-width:420px;width:90%}
input,textarea{width:100%;padding:8px;margin-bottom:10px;border:1px solid #ccc;border-radius:6px}
button{padding:6px 12px;background:var(--accent);border:none;color:#fff;border-radius:6px;cursor:pointer}
button.delete{background:#d93025}
button.secondary{background:#6c757d}

.download-btn{text-decoration:none;padding:6px 12px;background:#0b5ed7;color:white;border-radius:6px;font-size:14px;display:inline-block}

/* Footer */
footer{margin-top:24px;background:#0b5ed7;color:#fff;padding:14px;text-align:center;border-radius:6px}
</style>
</head>
<body>

<div class="topbar">
  <div>বাংলাদেশ নার্সেস অ্যাসোসিয়েশন (বিএনএ) - ময়মনসিংহ</div>
  <div class="admin-panel">
    <div class="admin-info" id="adminInfo">
      <span>এডমিন</span>
      <button id="addBtn" title="নতুন নোটিশ যোগ করুন">+</button>
      <button id="logoutBtn">লগ আউট</button>
    </div>
    <button id="loginBtn" title="এডমিন লগইন">+</button>
  </div>
</div>

<div class="header">
  <img src="https://ik.imagekit.io/nasirbam/bna_logo.png?updatedAt=1751567035734" alt="BNA Logo">
  <div>
    <h1>বাংলাদেশ নার্সেস অ্যাসোসিয়েশন (বিএনএ)</h1>
    <p>ময়মনসিংহ জেলা শাখা</p>
  </div>
</div>

<main class="container">
  <h2>সর্বশেষ নোটিশ</h2>
  <div id="noticeList"></div>
</main>

<footer>
  © <span id="year"></span> বাংলাদেশ নার্সেস অ্যাসোসিয়েশন (বিএনএ), ময়মনসিংহ • Developed by BNA Mymensingh
</footer>

<!-- Add Notice Modal -->
<div id="addModal" class="modal">
  <div class="box">
    <h3>নতুন নোটিশ যোগ করুন</h3>
    <input type="text" id="title" placeholder="নোটিশ শিরোনাম">
    <textarea id="desc" rows="3" placeholder="বিবরণ (ঐচ্ছিক)"></textarea>
    <input type="file" id="fileInput">
    <div style="display:flex;gap:10px;margin-top:15px">
      <button onclick="saveNotice()">সংরক্ষণ</button>
      <button onclick="closeModal('addModal')" class="secondary">বন্ধ করুন</button>
    </div>
  </div>
</div>

<!-- Admin Login Modal -->
<div id="loginModal" class="modal">
  <div class="box">
    <h3>এডমিন লগইন</h3>
    <input type="text" id="adminUser" placeholder="ইউজারনেম">
    <input type="password" id="adminPass" placeholder="পাসওয়ার্ড">
    <div style="display:flex;gap:10px;margin-top:15px">
      <button onclick="loginAdmin()">লগইন</button>
      <button onclick="closeModal('loginModal')" class="secondary">বন্ধ করুন</button>
    </div>
  </div>
</div>

<script>
const $=id=>document.getElementById(id);
$('year').textContent=new Date().getFullYear();

const STORAGE_KEY='bna_notice_data';
const ADMIN_USER='admin';
const ADMIN_PASS='admin123n';

// Load Notices
function getNotices(){try{return JSON.parse(localStorage.getItem(STORAGE_KEY))||[]}catch{return[]}}
function saveAll(data){localStorage.setItem(STORAGE_KEY,JSON.stringify(data))}

// Render Notices
function renderNotices(){
  const list=$('noticeList'); 
  list.innerHTML='';
  const notices=getNotices();
  
  if(notices.length===0){
    list.innerHTML='<p style="color:gray;text-align:center;padding:20px;">কোন নোটিশ নেই</p>';
    return;
  }
  
  notices.slice().reverse().forEach((n,i)=>{
    const div=document.createElement('div');
    div.className='notice';
    
    div.innerHTML=`
      <div style="flex:1">
        <h3>${n.title}</h3>
        ${n.desc ? `<p>${n.desc}</p>` : ''}
        <div class="notice-date">তারিখ: ${n.date || 'অজানা'}</div>
      </div>
    `;
    
    const actionsDiv=document.createElement('div');
    actionsDiv.className='notice-actions';
    
    // View/Download button for everyone
    const downloadBtn=document.createElement('a');
    downloadBtn.textContent='ডাউনলোড';
    downloadBtn.className='download-btn';
    downloadBtn.href=n.dataURL;
    downloadBtn.target='_blank';
    downloadBtn.download=n.fileName;
    actionsDiv.appendChild(downloadBtn);
    
    // Delete button only for admin
    if(isAdmin()){
      const deleteBtn=document.createElement('button');
      deleteBtn.textContent='মুছুন';
      deleteBtn.className='delete';
      deleteBtn.onclick=()=>deleteNotice(i);
      actionsDiv.appendChild(deleteBtn);
    }
    
    div.appendChild(actionsDiv);
    list.appendChild(div);
  });
}

// Save new notice
function saveNotice(){
  const title=$('title').value.trim(); 
  if(!title){
    alert('নোটিশের শিরোনাম দিন');
    return;
  }
  
  const file=$('fileInput').files[0]; 
  if(!file){
    alert('ফাইল নির্বাচন করুন');
    return;
  }
  
  const reader=new FileReader();
  reader.onload=function(e){
    const data={
      title, 
      desc:$('desc').value.trim(), 
      fileName:file.name, 
      mime:file.type, 
      dataURL:e.target.result,
      date: new Date().toLocaleDateString('bn-BD')
    };
    const notices=getNotices();
    notices.push(data);
    saveAll(notices);
    closeModal('addModal');
    renderNotices();
    
    // Reset form
    $('title').value = '';
    $('desc').value = '';
    $('fileInput').value = '';
  }
  reader.readAsDataURL(file);
}

// Delete notice
function deleteNotice(index){
  if(!confirm('আপনি কি সত্যিই এই নোটিশ মুছতে চান?')) return;
  
  const notices=getNotices();
  // Calculate the actual index (since we're displaying in reverse)
  const actualIndex = notices.length - 1 - index;
  notices.splice(actualIndex, 1);
  saveAll(notices);
  renderNotices();
}

// Modal controls
function closeModal(modalId){
  $(modalId).classList.remove('open');
}

function openModal(modalId){
  $(modalId).classList.add('open');
}

// Event listeners
$('addBtn').onclick=()=>{
  openModal('addModal');
};

$('loginBtn').onclick=()=>{
  openModal('loginModal');
};

// Admin functions
function isAdmin() {
  return sessionStorage.getItem('isAdmin') === 'true';
}

function updateAdminUI() {
  if(isAdmin()) {
    $('loginBtn').style.display='none';
    $('adminInfo').style.display='flex';
  } else {
    $('loginBtn').style.display='inline-block';
    $('adminInfo').style.display='none';
  }
}

// Admin Login
function loginAdmin(){
  const username=$('adminUser').value.trim();
  const password=$('adminPass').value.trim();
  
  if(username===ADMIN_USER && password===ADMIN_PASS){
    sessionStorage.setItem('isAdmin','true');
    updateAdminUI();
    renderNotices();
    closeModal('loginModal');
    
    // Clear login form
    $('adminUser').value = '';
    $('adminPass').value = '';
    
    alert('সফলভাবে লগইন করা হয়েছে!');
  } else {
    alert('ভুল ইউজারনেম বা পাসওয়ার্ড');
  }
}

// Admin Logout
function logoutAdmin(){
  if(confirm('আপনি কি লগ আউট করতে চান?')){
    sessionStorage.removeItem('isAdmin');
    updateAdminUI();
    renderNotices();
    alert('সফলভাবে লগ আউট করা হয়েছে!');
  }
}

// Initialize
updateAdminUI();
renderNotices();

// Set up logout button
$('logoutBtn').onclick = logoutAdmin;

// Add some sample notices if empty
if(getNotices().length === 0) {
  const sampleNotices = [
    {
      title: "সাধারণ সভার নোটিশ",
      desc: "আগামী মাসের সাধারণ সভা সম্পর্কিত গুরুত্বপূর্ণ তথ্য",
      fileName: "general_meeting.pdf",
      date: new Date().toLocaleDateString('bn-BD'),
      dataURL: "#"
    },
    {
      title: "নতুন সদস্য নিবন্ধন",
      desc: "নতুন সদস্য নিবন্ধনের জন্য আবেদন ফর্ম",
      fileName: "membership_form.pdf", 
      date: new Date().toLocaleDateString('bn-BD'),
      dataURL: "#"
    }
  ];
  saveAll(sampleNotices);
  renderNotices();
}
</script>
</body>
</html>
